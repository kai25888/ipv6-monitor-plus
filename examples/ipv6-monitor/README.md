# IPv6 ç½‘ç»œç›‘æ§æœåŠ¡

åŸºäº chromium-base é•œåƒçš„ IPv6 ç½‘ç»œç›‘æ§å’Œè·¯ç”±å™¨ç®¡ç†æœåŠ¡ã€‚è‡ªåŠ¨æ£€æµ‹ IPv6 è¿æ¥çŠ¶æ€ï¼Œå½“å‘ç° IPv6 è¿æ¥ä¸¢å¤±æ—¶ï¼Œè‡ªåŠ¨é€šè¿‡ Puppeteer ç™»å½•åä¸ºè·¯ç”±å™¨å¹¶é‡å¯ IPv6 æ¨¡å—ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” å®šæ—¶ç›‘æ§ IPv6 è¿æ¥çŠ¶æ€
- ğŸ”„ è‡ªåŠ¨é‡å¯è·¯ç”±å™¨ IPv6 æ¨¡å—
- ğŸ›¡ï¸ é‡å¯å†·å´æœºåˆ¶ï¼Œé¿å…é¢‘ç¹æ“ä½œ
- ğŸ“Š RESTful API æ¥å£
- ğŸ¥ å¥åº·æ£€æŸ¥å’ŒçŠ¶æ€ç›‘æ§
- ğŸ³ Docker å®¹å™¨åŒ–éƒ¨ç½²

## å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒé…ç½®

å¤åˆ¶å¹¶ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼š

```bash
# è®¾ç½®è·¯ç”±å™¨ç™»å½•ä¿¡æ¯
export ROUTER_IP=192.168.3.1
export ROUTER_PASSWORD=your_router_password
export PORT=3003
```

### 2. æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f ipv6-monitor
```

## API æ¥å£

### åŸºç¡€ä¿¡æ¯
- `GET /` - æœåŠ¡ä¿¡æ¯å’Œå¯ç”¨æ¥å£
- `GET /health` - å¥åº·æ£€æŸ¥
- `GET /status` - è·å–ç›‘æ§çŠ¶æ€

### ç›‘æ§æ“ä½œ
- `POST /check` - æ‰‹åŠ¨æ‰§è¡Œ IPv6 æ£€æµ‹
- `POST /restart` - æ‰‹åŠ¨é‡å¯è·¯ç”±å™¨ IPv6 æ¨¡å—
- `POST /monitor/start` - å¯åŠ¨è‡ªåŠ¨ç›‘æ§
- `POST /monitor/stop` - åœæ­¢è‡ªåŠ¨ç›‘æ§

### ä½¿ç”¨ç¤ºä¾‹

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost:3003/status

# æ‰‹åŠ¨æ£€æµ‹ IPv6
curl -X POST http://localhost:3003/check

# æ‰‹åŠ¨é‡å¯ IPv6 æ¨¡å—
curl -X POST http://localhost:3003/restart
```

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `ROUTER_IP` | `192.168.3.1` | è·¯ç”±å™¨ IP åœ°å€ |
| `ROUTER_PASSWORD` | `admin` | è·¯ç”±å™¨ç®¡ç†å¯†ç  |
| `PORT` | `3003` | æœåŠ¡ç›‘å¬ç«¯å£ |

### ç›‘æ§é…ç½®

- **æ£€æµ‹é—´éš”**: 30 åˆ†é’Ÿ
- **é‡å¯å†·å´**: 5 åˆ†é’Ÿ
- **è¶…æ—¶è®¾ç½®**: 10 ç§’ï¼ˆIPv6 æ£€æµ‹ï¼‰
- **æ£€æµ‹åœ°å€**: `https://6.ipw.cn`ï¼ˆIPv6 ä¸“ç”¨æµ‹è¯•ç½‘ç«™ï¼‰

## æ³¨æ„äº‹é¡¹

1. **è·¯ç”±å™¨å…¼å®¹æ€§**: ç›®å‰é€‚é…åä¸ºå®¶ç”¨è·¯ç”±å™¨ï¼Œå…¶ä»–å“ç‰Œå¯èƒ½éœ€è¦ä¿®æ”¹ä»£ç 
2. **ç½‘ç»œæƒé™**: å®¹å™¨éœ€è¦ `NET_RAW` å’Œ `NET_ADMIN` æƒé™æ‰§è¡Œç½‘ç»œè¯Šæ–­
3. **IPv6 ç¯å¢ƒ**: ç¡®ä¿ç½‘ç»œç¯å¢ƒæ”¯æŒ IPv6
4. **å®‰å…¨è®¾ç½®**: å»ºè®®ä¿®æ”¹é»˜è®¤è·¯ç”±å™¨å¯†ç 

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ— æ³•è¿æ¥è·¯ç”±å™¨**
   - æ£€æŸ¥ `ROUTER_IP` æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤ç½‘ç»œè¿é€šæ€§

2. **ç™»å½•å¤±è´¥**
   - éªŒè¯ `ROUTER_PASSWORD` æ˜¯å¦æ­£ç¡®
   - æ£€æŸ¥è·¯ç”±å™¨æ˜¯å¦æ”¯æŒè‡ªåŠ¨åŒ–ç™»å½•

3. **IPv6 æ£€æµ‹å¤±è´¥**
   - ç¡®è®¤ç½‘ç»œæ”¯æŒ IPv6
   - æ£€æŸ¥å®¹å™¨ç½‘ç»œæƒé™

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose logs ipv6-monitor

# å®æ—¶æ—¥å¿—
docker-compose logs -f ipv6-monitor
```

## å¼€å‘å’Œå®šåˆ¶

### ä¿®æ”¹æ£€æµ‹é—´éš”

ç¼–è¾‘ `server.js` ä¸­çš„ cron è¡¨è¾¾å¼ï¼š

```javascript
// æ¯30åˆ†é’Ÿæ£€æµ‹ï¼ˆé»˜è®¤ï¼‰
cron.schedule('*/30 * * * *', async () => {
  // ...
});

// æ¯5åˆ†é’Ÿæ£€æµ‹
cron.schedule('*/5 * * * *', async () => {
  // ...
});
```

### é€‚é…å…¶ä»–è·¯ç”±å™¨

ä¿®æ”¹ `utils.js` ä¸­çš„ `restartIPv6Router` å‡½æ•°ï¼Œæ›´æ”¹ç›¸åº”çš„é€‰æ‹©å™¨å’Œæ“ä½œæ­¥éª¤ã€‚

## è®¸å¯è¯

MIT License